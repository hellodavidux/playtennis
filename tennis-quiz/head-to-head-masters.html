<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Head-to-Head Masters - Tennis Quiz Game | Tennis Quiz Games</title>
    <meta name="description" content="Test your knowledge of tennis's greatest rivalries! Guess who leads famous head-to-head matchups in tennis history from Federer-Nadal to Connors-McEnroe.">
    <meta name="keywords" content="tennis rivalries, head-to-head quiz, tennis H2H, tennis history quiz, Federer Nadal, Djokovic, tennis trivia">
    <meta name="author" content="David">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tennis-quiz.com/head-to-head-masters.html">
    <meta property="og:title" content="Head-to-Head Masters - Tennis Quiz Game">
    <meta property="og:description" content="Test your knowledge of tennis's greatest rivalries! Guess who leads famous head-to-head matchups in tennis history.">
    <meta property="og:image" content="https://tennis-quiz.com/images/h2h.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://tennis-quiz.com/head-to-head-masters.html">
    <meta property="twitter:title" content="Head-to-Head Masters - Tennis Quiz Game">
    <meta property="twitter:description" content="Test your knowledge of tennis's greatest rivalries! Guess who leads famous head-to-head matchups in tennis history.">
    <meta property="twitter:image" content="https://tennis-quiz.com/images/h2h.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://tennis-quiz.com/head-to-head-masters.html">
    
    <link rel="icon" type="image/png" href="images/logo-tennis-quiz.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .nav-unified {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: blur(8px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-link:hover {
            color: white;
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .sign-up-btn {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(8px);
        }

        .sign-up-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-1px);
        }

        .main-container {
            padding-top: 5rem;
        }

        .header {
            color: #2c3e50;
            padding: 2rem;
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 0.5em;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.8;
        }

        .game-content {
            padding: 2rem;
        }

        .loading {
            text-align: center;
            padding: 2rem;
        }

        .error {
            text-align: center;
            padding: 2rem;
            color: #e74c3c;
            background: #fdf2f2;
            border-radius: 10px;
            margin: 1rem 0;
        }

        .rivalry-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .vs-container {
            text-align: center;
            margin-bottom: 2rem;
        }

        .players-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .player-name {
            font-size: 1.8em;
            font-weight: 700;
            color: #2c3e50;
        }

        .vs-text {
            font-size: 2.5em;
            font-weight: 800;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .rivalry-info {
            color: #7f8c8d;
            font-size: 1.1em;
            margin-bottom: 2rem;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .option-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1.5rem 2rem;
            font-size: 1.2em;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .option-button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .option-button.correct {
            background: linear-gradient(135deg, #00d4aa, #00b894);
            animation: correctPulse 0.6s ease-out;
        }

        .option-button.incorrect {
            background: linear-gradient(135deg, #ff4757, #c44569);
            animation: incorrectShake 0.5s ease-in-out;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
            20%, 40%, 60%, 80% { transform: translateX(8px); }
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: white;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            transform: translateY(-50px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.show .modal {
            transform: translateY(0);
        }

        .modal-header {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 20px 20px 0 0;
            text-align: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.8em;
        }

        .modal-content {
            padding: 2rem;
            flex: 1;
            overflow-y: auto;
            text-align: center;
        }

        .result-emoji {
            font-size: 4em;
            margin-bottom: 1rem;
        }

        .result-title {
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .result-title.correct {
            color: #00d4aa;
        }

        .result-title.incorrect {
            color: #e74c3c;
        }

        .result-text {
            color: #7f8c8d;
            margin-bottom: 1.5rem;
            font-size: 1.1em;
        }

        .correct-answer {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            border-left: 4px solid #e74c3c;
        }

        .correct-answer-text {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .rivalry-details {
            color: #7f8c8d;
            font-size: 0.95em;
        }

        .atp-link {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e9ecef;
        }

        .atp-link a {
            color: #e74c3c;
            text-decoration: none;
            font-size: 0.9em;
            font-weight: 500;
        }

        .atp-link a:hover {
            text-decoration: underline;
        }

        /* Progress Bar Styles */
        .progress-container {
            max-width: 600px;
            margin: 0 auto 2rem auto;
            padding: 0 1rem;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .progress-bar {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow: hidden;
            height: 8px;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            padding: 1rem 2rem 2rem 2rem;
            border-top: 1px solid #e9ecef;
            background: white;
            border-radius: 0 0 20px 20px;
            flex-shrink: 0;
        }

        .next-button {
            flex: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s ease;
            font-weight: 600;
        }

        .next-button:hover {
            transform: translateY(-2px);
        }

        /* Final Results Modal */
        .final-results {
            text-align: center;
        }

        .final-emoji {
            font-size: 5em;
            margin-bottom: 1rem;
        }

        .final-title {
            font-size: 2em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 10px;
            border-left: 4px solid #e74c3c;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: 700;
            color: #e74c3c;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-top: 0.25rem;
        }

        .performance-message {
            background: #e8f5e8;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
            font-weight: 500;
        }

        .final-actions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .restart-button {
            background: linear-gradient(135deg, #00d4aa 0%, #00b894 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s ease;
            font-weight: 600;
            text-decoration: none;
            text-align: center;
        }

        .restart-button:hover {
            transform: translateY(-2px);
        }

        .home-button {
            background: #6c757d;
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s ease;
            text-decoration: none;
            text-align: center;
        }

        .home-button:hover {
            transform: translateY(-2px);
            background: #5a6268;
        }

        @media (max-width: 640px) {
            .nav-unified {
                padding: 1rem;
                gap: 0.5rem;
            }
            
            .main-container {
                padding-top: 5.5rem;
            }

            .players-row {
                flex-direction: column;
                gap: 1rem;
            }

            .player-name {
                font-size: 1.4em;
            }

            .vs-text {
                font-size: 2em;
            }

            .options-container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .final-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .game-content {
                padding: 1rem;
            }

            .modal {
                width: 95%;
                margin: 1rem;
            }

            .modal-content {
                padding: 1.5rem;
            }

            .modal-actions {
                flex-direction: column;
                padding: 1rem 1.5rem 1.5rem 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Unified Navigation -->
    <nav class="nav-unified">
        <div class="nav-links">
            <a href="index.html" class="nav-link">
                <img src="images/logo-tennis-quiz.png" alt="Tennis Quiz Logo" style="width: 20px; height: 20px;">
                TENNIS GAMES
            </a>
        </div>
        <div class="nav-actions">
            <button class="sign-up-btn" onclick="openJoinModal()">
                Join for more
            </button>
        </div>
    </nav>

    <div class="main-container">
        <div class="container">
            <div class="header">
                <h1>🥊 Head-to-Head Masters</h1>
                <p>Test your knowledge of tennis's greatest rivalries!</p>
                <p style="font-size: 0.9em; opacity: 0.8; margin-top: 0.5rem;">From Big 3 battles to classic era showdowns</p>
            </div>

            <div class="game-content">
                <!-- Progress Bar -->
                <div class="progress-container" id="progressContainer" style="display: none;">
                    <div class="progress-header">
                        <span>Progress</span>
                        <span id="progress-text">0/10</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="loading" id="loadingMessage">
                    Loading tennis rivalries data...
                </div>

                <div class="error" id="errorMessage" style="display: none;">
                    Failed to load rivalry data. Please refresh the page.
                </div>

                <div id="gameContent" style="display: none;">
                    <div class="rivalry-card">
                        <div class="vs-container">
                            <div class="players-row">
                                <div class="player-name" id="player1-name">Player 1</div>
                                <div class="vs-text">VS</div>
                                <div class="player-name" id="player2-name">Player 2</div>
                            </div>
                            <div class="rivalry-info" id="rivalry-info">Loading rivalry information...</div>
                        </div>
                        
                        <div class="options-container">
                            <button class="option-button" id="option1" onclick="selectAnswer(1)">
                                <span id="option1-text">Player 1 leads</span>
                            </button>
                            <button class="option-button" id="option2" onclick="selectAnswer(2)">
                                <span id="option2-text">Player 2 leads</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Play More Games Section -->
    <div style="margin-top: 3rem; padding: 2rem 0; background: rgba(255, 255, 255, 0.05); border-radius: 20px;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 1.5rem;">
            <h2 style="text-align: center; color: white; font-size: 2rem; margin-bottom: 2rem; font-weight: bold;">🎾 Play More Games</h2>
            <div style="display: flex; flex-direction: column; gap: 1rem; max-width: 600px; margin: 0 auto;">
                
                <!-- Mystery Player Timeline -->
                <a href="guess-player-performance-timeline.html" class="game-card-responsive" style="padding: 1rem; background: linear-gradient(145deg, #5f27cd, #341f97); border-radius: 12px; text-decoration: none; transition: transform 0.3s ease;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                    <img src="images/mistery-player.png" alt="Mystery Player Timeline" style="width: 64px; height: 64px; object-fit: cover; border-radius: 8px;">
                    <div style="flex: 1;">
                        <h3 style="color: white; font-size: 1.1rem; font-weight: bold; margin-bottom: 0.25rem;">Mystery Player Timeline</h3>
                        <p style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">Guess the player by their Grand Slam performance timeline</p>
                    </div>
                    <span class="play-button-responsive" style="background: rgba(255,255,255,0.2); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.9rem;">Play</span>
                </a>

                <!-- ATP Ranking Riddle -->
                <a href="guess-atp-rankings.html" class="game-card-responsive" style="padding: 1rem; background: linear-gradient(145deg, #3742fa, #2f3542); border-radius: 12px; text-decoration: none; transition: transform 0.3s ease;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                    <img src="images/ranking-riddle.png" alt="ATP Ranking Riddle" style="width: 64px; height: 64px; object-fit: cover; border-radius: 8px;">
                    <div style="flex: 1;">
                        <h3 style="color: white; font-size: 1.1rem; font-weight: bold; margin-bottom: 0.25rem;">ATP Ranking Riddle</h3>
                        <p style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">Guess the player by their highest ATP ranking each year</p>
                    </div>
                    <span class="play-button-responsive" style="background: rgba(255,255,255,0.2); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.9rem;">Play</span>
                </a>

                <!-- BIG3 Finals Scores -->
                <a href="guess-scores.html" class="game-card-responsive" style="padding: 1rem; background: linear-gradient(145deg, #ff4757, #c44569); border-radius: 12px; text-decoration: none; transition: transform 0.3s ease;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                    <img src="images/big3-scores.png" alt="BIG3 Finals Scores" style="width: 64px; height: 64px; object-fit: cover; border-radius: 8px;">
                    <div style="flex: 1;">
                        <h3 style="color: white; font-size: 1.1rem; font-weight: bold; margin-bottom: 0.25rem;">BIG3 Finals Scores</h3>
                        <p style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">Guess set scores from Big 3 Grand Slam finals</p>
                    </div>
                    <span class="play-button-responsive" style="background: rgba(255,255,255,0.2); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.9rem;">Play</span>
                </a>

                <!-- Random Legends Tier -->
                <a href="tennis-tier-list.html" class="game-card-responsive" style="padding: 1rem; background: linear-gradient(145deg, #ffd700, #ff9f43); border-radius: 12px; text-decoration: none; transition: transform 0.3s ease;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                    <img src="images/random-tierlist.png" alt="Random Legends Tier" style="width: 64px; height: 64px; object-fit: cover; border-radius: 8px;">
                    <div style="flex: 1;">
                        <h3 style="color: white; font-size: 1.1rem; font-weight: bold; margin-bottom: 0.25rem;">Random Legends Tier</h3>
                        <p style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">Rank tennis legends by their ATP titles</p>
                    </div>
                    <span class="play-button-responsive" style="background: rgba(255,255,255,0.2); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.9rem;">Play</span>
                </a>

                <!-- Top-10 Time Machine -->
                <a href="top10-game.html" class="game-card-responsive" style="padding: 1rem; background: linear-gradient(145deg, #ff9f43, #ee5a24); border-radius: 12px; text-decoration: none; transition: transform 0.3s ease;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                    <img src="images/top-10-tbt.png" alt="Top-10 Time Machine" style="width: 64px; height: 64px; object-fit: cover; border-radius: 8px;">
                    <div style="flex: 1;">
                        <h3 style="color: white; font-size: 1.1rem; font-weight: bold; margin-bottom: 0.25rem;">Top-10 Time Machine</h3>
                        <p style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">Guess ATP Year-End Top 10 Rankings for each year</p>
                    </div>
                    <span class="play-button-responsive" style="background: rgba(255,255,255,0.2); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.9rem;">Play</span>
                </a>

                <!-- GS Champions Ladder -->
                <a href="grand-slam-winners.html" class="game-card-responsive" style="padding: 1rem; background: linear-gradient(145deg, #00d4aa, #00b894); border-radius: 12px; text-decoration: none; transition: transform 0.3s ease;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                    <img src="images/champions-gs-history.png" alt="GS Champions Ladder" style="width: 64px; height: 64px; object-fit: cover; border-radius: 8px;">
                    <div style="flex: 1;">
                        <h3 style="color: white; font-size: 1.1rem; font-weight: bold; margin-bottom: 0.25rem;">GS Champions Ladder</h3>
                        <p style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">Name Grand Slam champions from 2024 back to 2000</p>
                    </div>
                    <span class="play-button-responsive" style="background: rgba(255,255,255,0.2); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.9rem;">Play</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer style="margin-top: 2rem; padding: 1.5rem 0;">
        <div style="max-width: 1400px; margin: 0 auto; padding: 0 1.5rem; text-align: center;">
            <p style="color: rgba(255,255,255,0.8); font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem;">
                Developed by David
            </p>
            <p style="color: rgba(255,255,255,0.8); font-size: 0.875rem; margin-bottom: 0.5rem;">
                Data sources: <a href="https://www.tennisabstract.com/" target="_blank" rel="noopener noreferrer" style="color: white; text-decoration: underline;">Tennis Abstract</a> and <a href="https://github.com/jeffsackmann" target="_blank" rel="noopener noreferrer" style="color: white; text-decoration: underline;">Jeff Sackmann</a>
            </p>
            <p style="color: rgba(255,255,255,0.6); font-size: 0.75rem;">
                Would you like to give feedback? - <a href="mailto:feedback@tennis-quiz.com" style="color: white; text-decoration: underline;">send a comment here</a>
            </p>
        </div>
    </footer>

    <!-- Result Modal -->
    <div class="modal-overlay" id="resultModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modal-title">Result</h2>
            </div>
            <div class="modal-content">
                <div class="result-emoji" id="result-emoji">🎾</div>
                <div class="result-title" id="result-title">Result</div>
                <div class="result-text" id="result-text">Result details</div>
                <div class="correct-answer">
                    <div class="correct-answer-text" id="correct-answer">Correct Answer</div>
                    <div class="rivalry-details" id="rivalry-details">Additional details</div>
                    <div class="atp-link" id="atp-link">
                        <a href="#" target="_blank" id="atp-search-link">Search for Player vs Player H2H on ATP</a>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="next-button" id="next-button" onclick="nextQuestion()">
                    Next Question
                </button>
            </div>
        </div>
    </div>

    <!-- Final Results Modal -->
    <div class="modal-overlay" id="finalModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Game Complete!</h2>
            </div>
            <div class="modal-content">
                <div class="final-results">
                    <div class="final-emoji">🏆</div>
                    <div class="final-title">Well Done!</div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="final-score">0</div>
                            <div class="stat-label">Correct</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="final-total">10</div>
                            <div class="stat-label">Total</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="final-accuracy">0%</div>
                            <div class="stat-label">Accuracy</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="best-streak">0</div>
                            <div class="stat-label">Best Streak</div>
                        </div>
                    </div>
                    
                    <div class="performance-message" id="performance-message">
                        Great job learning about tennis rivalries!
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <div class="final-actions">
                    <button class="restart-button" onclick="restartGame()">
                        Play Again
                    </button>
                    <a href="index.html" class="home-button">
                        More Games
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let rivalries = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let streak = 0;
        let bestStreak = 0;
        let correctAnswers = 0;
        let totalQuestions = 10;
        let gameQuestions = [];

        // Load rivalry data
        async function loadRivalryData() {
            try {
                const response = await fetch('h2h_rivalries.json');
                const data = await response.json();
                rivalries = data;
                console.log(`Loaded ${rivalries.length} rivalries`);
                startGame();
            } catch (error) {
                console.error('Error loading rivalry data:', error);
                document.getElementById('errorMessage').style.display = 'block';
                document.getElementById('loadingMessage').style.display = 'none';
            }
        }

        // Shuffle array
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Start the game
        function startGame() {
            // Hide loading screen
            document.getElementById('loadingMessage').style.display = 'none';
            document.getElementById('gameContent').style.display = 'block';
            document.getElementById('progressContainer').style.display = 'block';

            // Select random rivalries for this game
            const shuffledRivalries = shuffleArray(rivalries);
            gameQuestions = shuffledRivalries.slice(0, totalQuestions);
            
            currentQuestionIndex = 0;
            score = 0;
            streak = 0;
            bestStreak = 0;
            correctAnswers = 0;

            updateProgress();
            showQuestion();
        }

        // Update progress bar
        function updateProgress() {
            const progress = (currentQuestionIndex / totalQuestions) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = `${currentQuestionIndex}/${totalQuestions}`;
        }

        // Show current question
        function showQuestion() {
            const rivalry = gameQuestions[currentQuestionIndex];
            
            // Update question display
            document.getElementById('player1-name').textContent = rivalry.player1;
            document.getElementById('player2-name').textContent = rivalry.player2;
            document.getElementById('rivalry-info').textContent = 
                `${rivalry.total_matches} matches played (${rivalry.years_span})`;
            
            // Update option buttons
            document.getElementById('option1-text').textContent = `${rivalry.player1} leads`;
            document.getElementById('option2-text').textContent = `${rivalry.player2} leads`;
            
            // Reset button styles
            const option1 = document.getElementById('option1');
            const option2 = document.getElementById('option2');
            option1.className = 'option-button';
            option2.className = 'option-button';
            
            // Enable buttons
            option1.disabled = false;
            option2.disabled = false;

            updateProgress();
        }

        // Handle answer selection
        function selectAnswer(option) {
            const rivalry = gameQuestions[currentQuestionIndex];
            const option1 = document.getElementById('option1');
            const option2 = document.getElementById('option2');
            
            // Disable buttons
            option1.disabled = true;
            option2.disabled = true;
            
            let isCorrect = false;
            
            // Check if answer is correct
            if (rivalry.leader === 'Tied') {
                // Handle tied rivalries (very rare)
                isCorrect = false; // For simplicity, we'll count ties as incorrect
            } else if (option === 1 && rivalry.leader === rivalry.player1) {
                isCorrect = true;
            } else if (option === 2 && rivalry.leader === rivalry.player2) {
                isCorrect = true;
            }
            
            // Update score and streak
            if (isCorrect) {
                score++;
                streak++;
                correctAnswers++;
                bestStreak = Math.max(bestStreak, streak);
            } else {
                streak = 0;
            }
            
            // Update button styles
            if (isCorrect) {
                const correctButton = rivalry.leader === rivalry.player1 ? option1 : option2;
                correctButton.classList.add('correct');
            } else {
                const selectedButton = option === 1 ? option1 : option2;
                selectedButton.classList.add('incorrect');
                
                // Show correct answer
                const correctButton = rivalry.leader === rivalry.player1 ? option1 : option2;
                setTimeout(() => {
                    correctButton.classList.add('correct');
                }, 500);
            }
            
            // Show result modal
            setTimeout(() => {
                showResult(isCorrect, rivalry);
            }, 1000);
        }

        // Show result modal
        function showResult(isCorrect, rivalry) {
            const modal = document.getElementById('resultModal');
            const resultEmoji = document.getElementById('result-emoji');
            const resultTitle = document.getElementById('result-title');
            const resultText = document.getElementById('result-text');
            const correctAnswer = document.getElementById('correct-answer');
            const rivalryDetails = document.getElementById('rivalry-details');
            const modalTitle = document.getElementById('modal-title');
            const nextButton = document.getElementById('next-button');
            
            if (isCorrect) {
                resultEmoji.textContent = '✅';
                resultTitle.textContent = 'Correct!';
                resultTitle.className = 'result-title correct';
                modalTitle.textContent = 'Well Done!';
                resultText.textContent = `Great job! You earned 1 point.`;
            } else {
                resultEmoji.textContent = '❌';
                resultTitle.textContent = 'Incorrect';
                resultTitle.className = 'result-title incorrect';
                modalTitle.textContent = 'Not Quite!';
                resultText.textContent = 'Better luck next time. Keep learning!';
            }
            
            // Show correct answer
            if (rivalry.leader === 'Tied') {
                correctAnswer.textContent = `This rivalry is tied at ${rivalry.h2h_display}`;
            } else {
                correctAnswer.textContent = `${rivalry.leader} leads ${rivalry.h2h_display}`;
            }
            
            rivalryDetails.textContent = `${rivalry.total_matches} total matches across ${rivalry.total_tournaments} tournaments (${rivalry.years_span})`;
            
            // Update ATP search link
            const player1Clean = rivalry.player1.replace(/\s+/g, '+');
            const player2Clean = rivalry.player2.replace(/\s+/g, '+');
            const atpSearchUrl = `https://www.google.com/search?q=${player1Clean}+vs+${player2Clean}+head+to+head+ATP`;
            
            const atpLinkElement = document.getElementById('atp-search-link');
            atpLinkElement.href = atpSearchUrl;
            atpLinkElement.textContent = `Search for ${rivalry.player1} vs ${rivalry.player2} H2H on ATP`;
            
            // Update next button text
            if (currentQuestionIndex >= totalQuestions - 1) {
                nextButton.textContent = 'View Results';
            } else {
                nextButton.textContent = 'Next Question';
            }
            
            modal.classList.add('show');
        }

        // Next question
        function nextQuestion() {
            document.getElementById('resultModal').classList.remove('show');
            
            currentQuestionIndex++;
            
            if (currentQuestionIndex >= totalQuestions) {
                setTimeout(() => {
                    showFinalResults();
                }, 300);
            } else {
                setTimeout(() => {
                    showQuestion();
                }, 300);
            }
        }

        // Show final results
        function showFinalResults() {
            const modal = document.getElementById('finalModal');
            const accuracy = Math.round((correctAnswers / totalQuestions) * 100);
            
            document.getElementById('final-score').textContent = score;
            document.getElementById('final-total').textContent = totalQuestions;
            document.getElementById('final-accuracy').textContent = accuracy + '%';
            document.getElementById('best-streak').textContent = bestStreak;
            
            // Performance message
            const messageEl = document.getElementById('performance-message');
            let message = '';
            if (accuracy >= 90) {
                message = '🔥 Tennis Historian! You know your rivalries like a pro commentator!';
            } else if (accuracy >= 70) {
                message = '⭐ Rivalry Expert! Impressive knowledge of tennis history!';
            } else if (accuracy >= 50) {
                message = '👍 Tennis Fan! You\'re getting the hang of these legendary matchups!';
            } else {
                message = '📚 Keep Learning! Tennis has so many amazing rivalries to discover!';
            }
            
            messageEl.textContent = message;
            modal.classList.add('show');
        }

        // Restart game
        function restartGame() {
            document.getElementById('finalModal').classList.remove('show');
            setTimeout(() => {
                // Reset progress bar
                document.getElementById('progressContainer').style.display = 'none';
                startGame();
            }, 300);
        }

        // Join modal functions
        function openJoinModal() {
            document.getElementById('joinModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeJoinModal() {
            document.getElementById('joinModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            loadRivalryData();
        });

        // Close modals when clicking overlay
        document.getElementById('resultModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('show');
                setTimeout(() => {
                    nextQuestion();
                }, 100);
            }
        });

        document.getElementById('finalModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('show');
            }
        });

        // Close join modal when clicking outside
        document.getElementById('joinModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeJoinModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && document.getElementById('joinModal').style.display === 'flex') {
                closeJoinModal();
            }
        });
    </script>

    <!-- Join Modal -->
    <div id="joinModal" class="join-modal-overlay" style="display: none;">
        <div class="join-modal">
            <div class="join-modal-header">
                <h2>Join Tennis Quiz Community</h2>
                <button class="join-modal-close" onclick="closeJoinModal()">&times;</button>
            </div>
            <div class="join-modal-content">
                <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSc-vUaKLdZVDtMyI64qCU_nPamziods5VaTm2P5Gw5jejkimA/viewform?embedded=true" 
                        width="100%" 
                        height="600" 
                        frameborder="0" 
                        marginheight="0" 
                        marginwidth="0">
                    Loading…
                </iframe>
            </div>
        </div>
    </div>

    <style>
        .join-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .join-modal {
            background: white;
            border-radius: 12px;
            width: 100%;
            max-width: 700px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .join-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid #e5e7eb;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .join-modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .join-modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        .join-modal-close:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .join-modal-content {
            padding: 0;
            overflow: hidden;
        }

        .join-modal-content iframe {
            border: none;
            width: 100%;
            height: 600px;
        }

        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .join-modal {
                max-width: 95vw;
                max-height: 95vh;
            }

            .join-modal-header {
                padding: 16px 20px;
            }

            .join-modal-header h2 {
                font-size: 1.25rem;
            }

            .join-modal-content iframe {
                height: 500px;
            }
        }

        @media (max-width: 480px) {
            .join-modal-overlay {
                padding: 10px;
            }

            .join-modal {
                max-width: 100vw;
                max-height: 100vh;
                border-radius: 8px;
            }

            .join-modal-content iframe {
                height: 450px;
            }
        }
    </style>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Game",
        "name": "Head-to-Head Masters",
        "description": "Test your knowledge of tennis's greatest rivalries! Guess who leads famous head-to-head matchups in tennis history from Federer-Nadal to classic era battles.",
        "url": "https://tennis-quiz.com/head-to-head-masters.html",
        "image": "https://tennis-quiz.com/images/h2h.png",
        "gameType": "Quiz",
        "genre": "Sports Trivia",
        "category": "Tennis",
        "author": {
            "@type": "Person",
            "name": "David"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Tennis Quiz Games"
        }
    }
    </script>
</body>
</html>